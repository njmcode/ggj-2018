{"version":3,"sources":["webpack:///index.bundle.js","webpack:///webpack/bootstrap 65c19ef82422588db5fc","webpack:///./src/data/events.js","webpack:///./src/shared/main.css","webpack:///./src/app/style.css","webpack:///./src/data/gamescript.js","webpack:///./src/modules/chat/chat.css","webpack:///./src/modules/media/media.css","webpack:///./src/index.js","webpack:///./src/manifest.json","webpack:///./src/app/index.js","webpack:///./src/shared/utils.js","webpack:///./src/app/template.js","webpack:///./src/core/Emitter.js","webpack:///./src/app/GameState.js","webpack:///./src/core/ScriptReader.js","webpack:///./src/modules/chat/ChatTab.js","webpack:///./src/modules/chat/template.js","webpack:///./src/modules/media/MediaTab.js","webpack:///./src/modules/media/template.js","webpack:///./src/modules/media/files.js","webpack:///./src/assets/location1.jpg","webpack:///./src/assets/location2.jpg","webpack:///./src/assets/location3.jpg","webpack:///./src/assets/location4.jpg","webpack:///./src/assets/location5.jpg"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","value","EVT_MESSAGE_RECEIVED","EVT_CHOICES_RECEIVED","EVT_SEND_INITIAL_PHOTOS","EVT_CHOICE_SELECTED","EVT_PUZZLE_SUCCESS","EVT_PUZZLE_DATA_SENT","EVT_PUZZLE_FAIL","EVT_ADVANCE_GAME_STATE","EVT_TAB_NOTIFY","EVT_PUZZLE_FIRST_OPEN","EVT_FAILGAME","hidden","winBlue","appWrapper","appHeader","closeBut","tabNav","activeTab","visibleTab","tabNotify","appTabWindow","appTabWrapper","activeContent","appFooter","CHAT_B","CHAT_A","undefined","_events","Events","obj","newObj","key","default","chapters","intro1","chat","text","choices","goto","activated","noquestions","event","tutorial","firstpuzzlecomplete","firstpuzzlesent","EVT_FIRST_NEWS_ARTICLE","strangepackage","donotread","yourownrisk","thewarning","EVT_SECOND_NEWS_ARTICLE","readfile","foolish","oddsignal","wisechoice","EVT_THIRD_NEWS_ARTICLE","goingon","unwisechoice","trust","helloagents","agentb1","agentr1","EVT_FOURTH_NEWS_ARTICLE","bluepacket","EVT_FIFTHB_NEWS_ARTICLE","redpacket","EVT_FIFTHR_NEWS_ARTICLE","failstate1","failstate2","failstate3","chatBlue","chatGreen","chatRed","conversationPanel","msgPanel","msg","reveal","agentA","agentB","player","choicePanel","choiceButton","mediaPanel","mediaList","imageThumbnail","unavailable","mediaDetail","formRow","_app","_app2","console","log","app","document","querySelector","addEventListener","e","style","display","setTimeout","start","_interopRequireDefault","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","length","descriptor","writable","protoProps","staticProps","_utils","_template","_template2","_style","_style2","_Emitter","_Emitter2","_GameState","_GameState2","_ChatTab","_ChatTab2","_MediaTab","_MediaTab2","_gamescript","App","this","initialTabId","appEl","body","tabData","id","label","visible","tabDataIds","map","td","emitter","gamestate","window","_this","el","dom","innerHTML","appendChild","closeButEl","location","reload","navEl","contentEl","forEach","tdata","idx","tabNavEl","createElement","textContent","dataset","tabId","classList","add","t","srcElement","setActiveTab","_navEl","tabWrapEl","tabContentEl","template","_wrapEl","_contentEl","init","bind","setTabNotification","tidx","indexOf","tab","fn","remove","isVisible","arguments","visibleContent","setTabVisibility","tplStr","wrap","content","firstElementChild","Emitter","events","func","ctx","push","_len","params","Array","_key","ln","_events$id","apply","_defineProperty","_ScriptReader","_ScriptReader2","_gamescript2","GameState","_eventBindings","reader","initialChapter","choiceHistory","puzzleAttemptsLeft","totalPuzzles","puzzleStatus","puzzleID","isComplete","isSent","eventBindings","ev","advance","getNextMsg","info","dispatch","filter","choice","startChapter","puzzleId","getCompletedPuzzleCount","getSentPuzzleDataCount","ScriptReader","script","currentChapter","currentChapterId","chapterLength","currentChapterMsgIdx","warn","_chat","_chat2","ChatTab","chatID","messageLog","convoPanelEl","msgPanelEl","choicePanelEl","handleIncomingMessage","displayChoices","displayMessage","clearChoices","container","isPlayer","scrollTop","scrollHeight","options","opt","button","setAttribute","offsetHeight","_media","_media2","_main","_files","_files2","MediaTab","closeDetails","checkPasscode","releasePhoto","index","_this2","imgContainer","imgEl","src","expandPhoto","insertBefore","cloneNode","firstChild","removeChild","imgContainersTemplate","_location","_location2","_location3","_location4","_location5","_location6","_location7","_location8","_location9","_location10"],"mappings":"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","file":"index.bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 6);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * Shared event manifest for the entire app to use.\n */\n\nvar EVT_MESSAGE_RECEIVED = exports.EVT_MESSAGE_RECEIVED = 'EVT_MESSAGE_RECEIVED';\nvar EVT_CHOICES_RECEIVED = exports.EVT_CHOICES_RECEIVED = 'EVT_CHOICES_RECEIVED';\nvar EVT_SEND_INITIAL_PHOTOS = exports.EVT_SEND_INITIAL_PHOTOS = 'EVT_SEND_INITIAL_PHOTOS';\nvar EVT_CHOICE_SELECTED = exports.EVT_CHOICE_SELECTED = 'EVT_CHOICE_SELECTED';\nvar EVT_PUZZLE_SUCCESS = exports.EVT_PUZZLE_SUCCESS = 'EVT_PUZZLE_SUCCESS';\nvar EVT_PUZZLE_DATA_SENT = exports.EVT_PUZZLE_DATA_SENT = 'EVT_PUZZLE_DATA_SENT';\nvar EVT_PUZZLE_FAIL = exports.EVT_PUZZLE_FAIL = 'EVT_PUZZLE_FAIL';\nvar EVT_ADVANCE_GAME_STATE = exports.EVT_ADVANCE_GAME_STATE = 'EVT_ADVANCE_GAME_STATE';\nvar EVT_TAB_NOTIFY = exports.EVT_TAB_NOTIFY = 'EVT_TAB_NOTIFY';\nvar EVT_PUZZLE_FIRST_OPEN = exports.EVT_PUZZLE_FIRST_OPEN = 'EVT_PUZZLE_FIRST_OPEN';\nvar EVT_FAILGAME = exports.EVT_FAILGAME = 'EVT_FAILGAME';\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\nmodule.exports = {\"hidden\":\"shared__main__hidden_116d0f\"};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\nmodule.exports = {\"winBlue\":\"#2b0081\",\"appWrapper\":\"app__style__appWrapper_51bd3e\",\"appHeader\":\"app__style__appHeader_320435\",\"closeBut\":\"app__style__closeBut_d04839\",\"tabNav\":\"app__style__tabNav_1038d3\",\"activeTab\":\"app__style__activeTab_d5cd6c\",\"visibleTab\":\"app__style__visibleTab_b40f2e\",\"tabNotify\":\"app__style__tabNotify_f5199c\",\"appTabWindow\":\"app__style__appTabWindow_d994a7\",\"appTabWrapper\":\"app__style__appTabWrapper_c83871\",\"activeContent\":\"app__style__activeContent_cc741e\",\"appFooter\":\"app__style__appFooter_413425\"};\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CHAT_B = exports.CHAT_A = undefined;\n\nvar _events = __webpack_require__(0);\n\nvar Events = _interopRequireWildcard(_events);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n/**\n * The game 'script'.\n * Defines 'chapters' of the story made up of a list of\n * chat messages.\n *\n * A message can have the following props:\n *\n *  - chat: which chat window this belongs to\n *  - text: text to be shown for the message\n *  - event: an event which the GameState can fire when this message is received\n *  - choices: an array of options for the player to choose from\n *\n * Choices can have the following:\n *\n *  - text: label for the option\n *  - goto: which chapter ID to go to when this option is selected\n *\n */\n\nvar CHAT_A = exports.CHAT_A = 'agentA';\nvar CHAT_B = exports.CHAT_B = 'agentB';\n\nexports.default = {\n  chapters: {\n    'intro1': [{\n      chat: CHAT_A,\n      text: '*** INCOMING TRANSMISSION... ***'\n    }, {\n      chat: CHAT_A,\n      text: 'Agent 045, you have now been activated. Please respond.'\n    }, {\n      chat: CHAT_A,\n      choices: [{\n        text: 'Uh, I think you have the wrong number',\n        goto: 'activated'\n      }, {\n        text: 'This is Agent 045, waiting command',\n        goto: 'activated'\n      }]\n    }],\n\n    'activated': [{\n      chat: CHAT_A,\n      text: 'Ah good, you’re there. We have a situation here that we need you immediate assistance with.'\n    }, {\n      chat: CHAT_A,\n      text: 'We’ve been locked out of remote access points in your area that we need reconnected to asap.'\n    }, {\n      chat: CHAT_A,\n      text: 'We need you to locate the access points, get pass the encryption software, and wire through the information packs directly via uplink.'\n    }, {\n      chat: CHAT_A,\n      text: 'Unfortunately due to the hack, we don’t have exact geolocations, only images of the locations in question, but they’re all near by and should be easy enough to find, given your familiarity with the area.'\n    }, {\n      chat: CHAT_A,\n      choices: [{\n        text: 'What do you mean by \"the hack\"?',\n        goto: 'noquestions'\n      }, {\n        text: 'What is this?!',\n        goto: 'noquestions'\n      }]\n    }],\n\n    'noquestions': [{\n      chat: CHAT_A,\n      text: 'We don’t have time for questions right now Agent 045, please get the information packets as soon as possible. The security of the entire world is at stake.'\n    }, {\n      chat: CHAT_A,\n      text: 'Check your Media tab, there you’ll find the 5 remote access points we need you to reconnect to command.',\n      event: Events.EVT_SEND_INITIAL_PHOTOS\n    }, {\n      chat: CHAT_A,\n      text: 'When you find an access point, look for our logo, you’ll find a password that you need to input to corresponding photo.'\n    }, {\n      chat: CHAT_A,\n      text: 'We’ll contact you again when you’ve reached access point 1.'\n    }, {\n      chat: CHAT_A,\n      choices: [{\n        text: 'O...k?',\n        goto: null\n      }, {\n        text: 'Understood command, over and out',\n        goto: null\n      }]\n    }],\n\n    'tutorial': [{\n      chat: CHAT_A,\n      text: 'Well done Agent 045, this is excellent.'\n    }, {\n      chat: CHAT_A,\n      text: 'Now you just have to decode the access to enable us to download the package.'\n    }, {\n      chat: CHAT_A,\n      text: 'It should be extremely straightforward for someone of your elite skill set.'\n    }, {\n      chat: CHAT_A,\n      text: 'Simply slides the blocks into the right location and we should be granted access.'\n    }],\n\n    'firstpuzzlecomplete': [{\n      chat: CHAT_A,\n      text: 'Perfect Agent 045, now please send the information packed to us over your secure network connection.'\n    }],\n\n    'firstpuzzlesent': [{\n      chat: CHAT_A,\n      text: 'Fantastic work Agent 045, please proceed to the next package for more information.',\n      event: Events.EVT_FIRST_NEWS_ARTICLE\n    }],\n\n    'strangepackage': [{\n      choices: [{\n        text: 'What is this text about?',\n        goto: 'donotread'\n      }, {\n        text: 'Sir, this packet is quite odd…',\n        goto: 'donotread'\n      }]\n    }],\n\n    'donotread': [{\n      chat: CHAT_A,\n      text: 'Agent 045, are you READING the highly CLASSIFIED information in these packets?!'\n    }, {\n      chat: CHAT_A,\n      text: 'Because we need you to access the files to send them to us, you’ll inherently gain access, but I am stressing that these are HIGHLY CLASSIFIED FILES.'\n    }, {\n      chat: CHAT_A,\n      text: 'DO NOT READ THEM UNDER ANY CIRCUMSTANCES.'\n    }, {\n      chat: CHAT_A,\n      text: 'IT IS A FEDERAL OFFENCE TO READ THESE FILES WITHOUT THE CORRECT LEVEL OF AUTHORISATION.'\n    }, {\n      chat: CHAT_A,\n      text: 'Do no read the files, just send them straight to us, understand? That’s a command soldier.'\n    }, {\n      chat: CHAT_A,\n      choices: [{\n        text: 'Understood sir. ',\n        goto: null\n      }, {\n        text: 'Or what?',\n        goto: 'yourownrisk'\n      }]\n    }],\n\n    'yourownrisk': [{\n      chat: CHAT_A,\n      text: '…'\n    }, {\n      chat: CHAT_A,\n      text: 'Well, I guess there’s nothing we can do, we need those files.'\n    }, {\n      chat: CHAT_A,\n      text: 'Read them at your own risk, just send them to us. We’ll sort that issue once we get this resolved.'\n    }, {\n      chat: CHAT_B,\n      text: 'Agent 045. Do not trust Agent B.'\n    }, {\n      chat: CHAT_B,\n      choices: [{\n        text: 'What do you mean?',\n        goto: 'thewarning'\n      }, {\n        text: 'I have no idea what you’re talking about.',\n        goto: 'thewarning'\n      }]\n    }],\n\n    'thewarning': [{\n      chat: CHAT_B,\n      text: 'You’ve been warned.'\n    }, {\n      chat: CHAT_B,\n      choices: [{\n        text: 'Wait! I want to know what’s going on!',\n        goto: null\n      }, {\n        text: 'I don’t know you, be gone scum.',\n        event: Events.EVT_SECOND_NEWS_ARTICLE,\n        goto: null\n      }]\n    }],\n\n    'readfile': [{\n      chat: CHAT_B,\n      text: 'Read the file.'\n    }, {\n      chat: CHAT_B,\n      text: 'Do you see the kind of information you’re dealing with here.'\n    }, {\n      chat: CHAT_B,\n      text: 'Do you really trust this kind of information with Agent B?'\n    }, {\n      chat: CHAT_B,\n      text: 'Do you even know who they are?'\n    }, {\n      chat: CHAT_B,\n      choices: [{\n        text: 'Well who are you then?',\n        goto: 'foolish'\n      }, {\n        text: 'Do you know who they are?',\n        goto: 'foolish'\n      }]\n    }],\n\n    'foolish': [{\n      chat: CHAT_B,\n      text: 'Don’t be foolish.'\n    }, {\n      chat: CHAT_B,\n      text: 'Keep your wits about you.'\n    }, {\n      chat: CHAT_B,\n      text: 'Don’t blindly do what they tell you too.'\n    }, {\n      chat: CHAT_B,\n      text: 'Don’t tell them about our conversation.'\n    }, {\n      chat: CHAT_A,\n      text: 'What was that?'\n    }, {\n      chat: CHAT_A,\n      text: 'Keep your wits about you.'\n    }, {\n      chat: CHAT_A,\n      text: 'Did you do something?'\n    }, {\n      chat: CHAT_A,\n      choices: [{\n        text: 'What do you mean?',\n        goto: 'oddsignal'\n      }]\n    }],\n\n    'oddsignal': [{\n      chat: CHAT_A,\n      text: ' I picked up an odd signal there.'\n    }, {\n      chat: CHAT_A,\n      text: 'It was very faint, but I thought I saw…'\n    }, {\n      chat: CHAT_A,\n      text: 'Maybe it was nothing. Did you see anything strange?'\n    }, {\n      chat: CHAT_A,\n      choices: [{\n        text: 'Nothing on this end.',\n        goto: 'wisechoice'\n      }, {\n        text: 'Do you mean Agent R?',\n        goto: 'unwisechoice'\n      }]\n    }],\n\n    'wisechoice': [{\n      chat: CHAT_A,\n      text: ' Ok. Just let me know if you anything comes up.'\n    }, {\n      chat: CHAT_B,\n      text: 'If you continue with this, I can share an extra information pack with you.'\n    }, {\n      chat: CHAT_B,\n      text: 'Keep up the pretense.'\n    }, {\n      chat: CHAT_B,\n      choices: [{\n        text: 'Who are you?',\n        goto: 'goingon'\n      }, {\n        text: 'What’s going on?',\n        event: Events.EVT_THIRD_NEWS_ARTICLE,\n        goto: 'goingon'\n      }]\n    }],\n\n    'goingon': [{\n      chat: CHAT_B,\n      text: ' That’s not important right now. The safety of the world is at stake, just make it to the packets and I’ll tell you what to do from there. '\n    }],\n\n    'unwisechoice': [{\n      chat: CHAT_A,\n      text: ' Agent R?! DO NOT ENGAGE, I repeat, DO NOT ENGAGE with Agent R! They are not to be trusted! '\n    }, {\n      chat: CHAT_A,\n      text: 'Do not engage them under any circumstances. They are the enemy.'\n    }, {\n      chat: CHAT_B,\n      text: 'What have you done! Do you want to destroy us all?!'\n    }, {\n      chat: CHAT_B,\n      text: 'If you do as Agent B says, we’re all doomed!'\n    }, {\n      chat: CHAT_B,\n      choices: [{\n        text: 'How am I meant to trust you?',\n        goto: 'trust'\n      }, {\n        text: 'Why?!',\n        goto: 'trust'\n      }]\n    }],\n\n    'trust': [{\n      chat: CHAT_B,\n      text: ' There’s no time to explain right now, you just have to trust me.'\n    }, {\n      chat: CHAT_B,\n      text: ' Get to the next info packet. Act as normal.'\n    }, {\n      chat: CHAT_B,\n      text: ' If you’re interested in saving the planet, you’ll do as I say.',\n      event: Events.EVT_THIRD_NEWS_ARTICLE\n    }],\n\n    'helloagents': [{\n      chat: CHAT_B,\n      text: 'Agent B: So, here you are.'\n    }, {\n      chat: CHAT_B,\n      text: 'Agent R: I guess you found me.'\n    }, {\n      chat: CHAT_B,\n      text: 'Agent B: We’ve tracked you Agent R. You’ve nowhere to hide.'\n    }, {\n      chat: CHAT_B,\n      text: 'Agent R: We won’t let you get a hold of the info packet.'\n    }, {\n      chat: CHAT_B,\n      choices: [{\n        text: 'You’re damn right!',\n        goto: 'agentb1'\n      }, {\n        text: 'I don’t think so.',\n        goto: 'agentr1'\n      }]\n    }],\n\n    'agentb1': [{\n      chat: CHAT_B,\n      text: 'Agent B: Ha!'\n    }, {\n      chat: CHAT_B,\n      text: 'Agent R: 045… I thought you were better than this.'\n    }, {\n      chat: CHAT_B,\n      text: 'Agent R: You’re signing your own death warrant.'\n    }, {\n      chat: CHAT_B,\n      text: 'Agent B: Don’t be ridiculous.'\n    }, {\n      chat: CHAT_B,\n      text: 'Agent B: Get to the last info point Agent 045.'\n    }, {\n      chat: CHAT_B,\n      text: 'Agent B: Then we can annihilate this scum.'\n    }, {\n      chat: CHAT_B,\n      text: 'Agent R: There’s still time.'\n    }, {\n      chat: CHAT_B,\n      text: 'Agent R: I hope that when the time comes, you’ll make the right choice.'\n    }, {\n      chat: CHAT_B,\n      text: 'Agent B: Idiot. '\n    }],\n\n    'agentr1': [{\n      chat: CHAT_B,\n      text: 'Agent B: Excuse me??'\n    }, {\n      chat: CHAT_B,\n      text: 'Agent R: I think you heard them B.'\n    }, {\n      chat: CHAT_B,\n      text: 'Agent R: They won’t be helping you anymore.'\n    }, {\n      chat: CHAT_B,\n      text: 'Agent B: Are you an idiot?!'\n    }, {\n      chat: CHAT_B,\n      text: 'Agent B: You’ll be helping a physcopath!'\n    }, {\n      chat: CHAT_B,\n      text: 'Agent B: This will start world war 3!'\n    }, {\n      chat: CHAT_B,\n      text: 'Agent R: Don’t waste your breath B. They’ve made their choice.'\n    }, {\n      chat: CHAT_B,\n      text: 'Agent R: We won’t start a war, we’ll be ending it.'\n    }, {\n      chat: CHAT_B,\n      text: 'Agent B: I beg of you, please. You still have time to change your mind.'\n    }, {\n      chat: CHAT_B,\n      text: 'Agent B: When the time comes, send the pack to me.'\n    }, {\n      chat: CHAT_B,\n      text: 'Agent B: Idiot.',\n      event: Events.EVT_FOURTH_NEWS_ARTICLE\n    }],\n\n    'bluepacket': [{\n      chat: CHAT_B,\n      text: 'Agent B: Well done Agent 045, you’ve made the correct decision.'\n    }, {\n      chat: CHAT_B,\n      text: 'Agent R: Oh god. What have you done.'\n    }, {\n      chat: CHAT_B,\n      text: 'Agent B: Exactly what he was meant to, R.'\n    }, {\n      chat: CHAT_B,\n      text: 'Agent B: I hope you’ve enjoyed your time on this earth.'\n    }, {\n      chat: CHAT_B,\n      text: 'Agent B: You will be rewarded Agent 045.'\n    }, {\n      chat: CHAT_B,\n      text: 'Agent R: You’ve doomed us all.',\n      event: Events.EVT_FIFTHB_NEWS_ARTICLE\n    }],\n\n    'redpacket': [{\n      chat: CHAT_B,\n      text: 'Agent R: Well done Agent 045, you’ve made the correct decision.'\n    }, {\n      chat: CHAT_B,\n      text: 'Agent B: Oh god. What have you done.'\n    }, {\n      chat: CHAT_B,\n      text: 'Agent R: Exactly what he was meant to, R.'\n    }, {\n      chat: CHAT_B,\n      text: 'Agent R: I hope you’ve enjoyed your time on this earth.'\n    }, {\n      chat: CHAT_B,\n      text: 'Agent R: You will be rewarded Agent 045.'\n    }, {\n      chat: CHAT_B,\n      text: 'Agent B: You’ve doomed us all.',\n      event: Events.EVT_FIFTHR_NEWS_ARTICLE\n    }],\n\n    'failstate1': [{\n      chat: CHAT_A,\n      text: '045! Be very careful, you’ll get locked out if you try to hack the access point incorrectly.'\n    }],\n\n    'failstate2': [{\n      chat: CHAT_A,\n      text: 'Agent. This is your last warning. DO NOT FAIL AGAIN.'\n    }],\n\n    'failstate3': [{\n      chat: CHAT_A,\n      text: 'You’ve proven yourself unable to handle this mission. You will not be contacted again.',\n      event: Events.EVT_FAILGAME\n    }]\n  }\n};\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\nmodule.exports = {\"chatBlue\":\"#d1d1ff\",\"chatGreen\":\"#d1ffd1\",\"chatRed\":\"#ffd1d1\",\"conversationPanel\":\"chat__chat__conversationPanel_982aae\",\"msgPanel\":\"chat__chat__msgPanel_128da4\",\"msg\":\"chat__chat__msg_40734c\",\"reveal\":\"chat__chat__reveal_91caa2\",\"agentA\":\"chat__chat__agentA_b11783\",\"agentB\":\"chat__chat__agentB_1dd93a\",\"player\":\"chat__chat__player_ecf56e\",\"choicePanel\":\"chat__chat__choicePanel_29a146\",\"choiceButton\":\"chat__chat__choiceButton_913795\"};\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\nmodule.exports = {\"mediaPanel\":\"media__media__mediaPanel_b4417a\",\"mediaList\":\"media__media__mediaList_437845\",\"imageThumbnail\":\"media__media__imageThumbnail_cfdc06\",\"unavailable\":\"media__media__unavailable_405d0b\",\"mediaDetail\":\"media__media__mediaDetail_de48e3\",\"formRow\":\"media__media__formRow_c89747\"};\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n__webpack_require__(1);\n\n__webpack_require__(7);\n\nvar _app = __webpack_require__(8);\n\nvar _app2 = _interopRequireDefault(_app);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconsole.log('Kick off');\nvar app = new _app2.default();\n\nvar SKIP_INTRO = false;\n\nif (SKIP_INTRO) {\n  app.start();\n} else {\n  var startBut = document.querySelector('#splash-inner button');\n  startBut.addEventListener('click', function (e) {\n    document.querySelector('#splash-inner').style.display = 'none';\n    setTimeout(function () {\n      app.start();\n    }, 1000);\n  });\n\n  //window.addEventListener('beforeunload', e => { e.returnValue = 'Really quit?' })\n}\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"/manifest.json\";\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _utils = __webpack_require__(9);\n\nvar _template = __webpack_require__(10);\n\nvar _template2 = _interopRequireDefault(_template);\n\nvar _style = __webpack_require__(2);\n\nvar _style2 = _interopRequireDefault(_style);\n\nvar _Emitter = __webpack_require__(11);\n\nvar _Emitter2 = _interopRequireDefault(_Emitter);\n\nvar _GameState = __webpack_require__(12);\n\nvar _GameState2 = _interopRequireDefault(_GameState);\n\nvar _ChatTab = __webpack_require__(14);\n\nvar _ChatTab2 = _interopRequireDefault(_ChatTab);\n\nvar _MediaTab = __webpack_require__(16);\n\nvar _MediaTab2 = _interopRequireDefault(_MediaTab);\n\nvar _gamescript = __webpack_require__(3);\n\nvar _events = __webpack_require__(0);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Main app UI class.\n *\n * - Composes the tab modules, event emitter and game\n * state\n * - Determines the available tabs and their default state\n * - Handles tab switching and visibility/rendering\n * - Initialises the tab modules\n * - Shares an Emitter instance between itself, game state and tab modules\n */\n\nvar App = function () {\n  function App() {\n    _classCallCheck(this, App);\n\n    this.initialTabId = 'ChatA';\n\n    this.appEl = document.body;\n    this.tabData = [{\n      id: 'ChatA',\n      label: '???',\n      visible: true,\n      module: new _ChatTab2.default(_gamescript.CHAT_A)\n    }, {\n      id: 'ChatB',\n      label: '???',\n      visible: false,\n      module: new _ChatTab2.default(_gamescript.CHAT_B)\n    }, {\n      id: 'Media',\n      label: 'Media',\n      visible: false,\n      module: new _MediaTab2.default()\n    }];\n    this.tabDataIds = this.tabData.map(function (td) {\n      return td.id;\n    });\n\n    this.emitter = new _Emitter2.default();\n    this.gamestate = new _GameState2.default(this.emitter);\n\n    window.emitter = this.emitter;\n  }\n\n  _createClass(App, [{\n    key: 'start',\n    value: function start() {\n      var _this = this;\n\n      // Render app shell\n      this.el = (0, _utils.dom)(_template2.default);\n      this.appEl.innerHTML = '';\n      this.appEl.appendChild(this.el);\n\n      // Header close button\n      this.closeButEl = this.el.querySelector('.' + _style2.default.closeBut);\n      this.closeButEl.addEventListener('click', function (e) {\n        window.location.reload();\n      });\n\n      // DOM areas for nav and content\n      this.navEl = this.el.querySelector('.' + _style2.default.tabNav);\n      this.contentEl = this.el.querySelector('.' + _style2.default.appTabWindow);\n\n      // Handle tab modules\n      this.tabData.forEach(function (tdata, idx) {\n\n        // Create nav item\n        var tabNavEl = document.createElement('button');\n        tabNavEl.textContent = tdata.id;\n        tabNavEl.dataset.tabId = tdata.id;\n        if (tdata.visible) tabNavEl.classList.add(_style2.default.visibleTab);\n\n        tabNavEl.addEventListener('click', function (e) {\n          var t = e.srcElement;\n          _this.setActiveTab(t.dataset.tabId);\n        });\n\n        _this.navEl.appendChild(tabNavEl);\n        tdata._navEl = tabNavEl;\n\n        // Init module\n        if (!tdata.module) return false;\n\n        // Render tab template into container\n        var tabWrapEl = document.createElement('div');\n        tabWrapEl.classList.add(_style2.default.appTabWrapper);\n        var tabContentEl = (0, _utils.dom)(tdata.module.template);\n        tabWrapEl.appendChild(tabContentEl);\n        _this.contentEl.appendChild(tabWrapEl);\n\n        tdata._wrapEl = tabWrapEl;\n        tdata._contentEl = tabContentEl;\n\n        tdata.module.init(tdata.id, tabContentEl, _this.emitter);\n      });\n\n      // Show notification on tabs if not the current one\n      this.emitter.bind(_events.EVT_TAB_NOTIFY, function (tabId) {\n        if (tabId !== _this.activeTab) {\n          _this.setTabNotification(tabId);\n        }\n      }, this);\n\n      // Render initial tab\n      this.setActiveTab(this.initialTabId);\n      this.gamestate.init();\n    }\n  }, {\n    key: 'setActiveTab',\n    value: function setActiveTab(tabId) {\n      var tidx = this.tabDataIds.indexOf(tabId);\n      if (tidx === -1 || !this.tabData[tidx].visible) return false;\n\n      this.tabData.forEach(function (tab) {\n        var fn = tab.id === tabId ? 'add' : 'remove';\n        tab._navEl.classList[fn](_style2.default.activeTab);\n        tab._wrapEl.classList[fn](_style2.default.activeContent);\n        if (tab.id === tabId) tab._navEl.classList.remove(_style2.default.tabNotify);\n      });\n\n      this.activeTab = tabId;\n\n      return true;\n    }\n  }, {\n    key: 'setTabVisibility',\n    value: function setTabVisibility(tabId) {\n      var isVisible = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      var tidx = this.tabDataIds.indexOf(tabId);\n      if (tidx === -1) return false;\n\n      var fn = isVisible ? 'add' : 'remove';\n      this.tabData[tidx]._navEl.classList[fn](_style2.default.visibleTab);\n      this.tabData[tidx]._wrapEl.classList[fn](_style2.default.visibleContent);\n      this.tabData[tidx].visible = isVisible;\n    }\n  }, {\n    key: 'setTabNotification',\n    value: function setTabNotification(tabId) {\n      if (tabId === this.activeTab) return false;\n\n      var tidx = this.tabDataIds.indexOf(tabId);\n      if (tidx === -1) return false;\n\n      this.setTabVisibility(tabId, true);\n      this.tabData[tidx]._navEl.classList.add(_style2.default.tabNotify);\n    }\n  }]);\n\n  return App;\n}();\n\nexports.default = App;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.dom = dom;\nfunction dom(tplStr) {\n  var wrap = document.createElement('template');\n  wrap.innerHTML = tplStr;\n  return wrap.content.firstElementChild;\n}\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _style = __webpack_require__(2);\n\nvar _style2 = _interopRequireDefault(_style);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = '\\n<div id=\"main\" class=\"' + _style2.default.appWrapper + '\">\\n  <header class=\"' + _style2.default.appHeader + '\">\\n    <h1>ISeekU v1.0.3a</h1>\\n    <button class=\"' + _style2.default.closeBut + '\">X</button>\\n  </header>\\n  <nav class=\"' + _style2.default.tabNav + '\">\\n  </nav>\\n  <div class=\"' + _style2.default.appTabWindow + '\">\\n    <!-- render tab contents here -->\\n  </div>\\n  <footer class=\"' + _style2.default.appFooter + '\">\\n    Ready\\n  </footer>\\n</div>';\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DEBUG = false;\n/**\n * Basic event bus/dispatcher.\n */\n\nvar Emitter = function () {\n  function Emitter() {\n    _classCallCheck(this, Emitter);\n\n    this.events = {};\n  }\n\n  _createClass(Emitter, [{\n    key: 'bind',\n    value: function bind(id, func, ctx) {\n      if (!(id in this.events)) {\n        DEBUG && console.log('Emitter:new event', id);\n        this.events[id] = [];\n      }\n      this.events[id].push(func.bind(ctx));\n      return func;\n    }\n  }, {\n    key: 'unbind',\n    value: function unbind(id, func) {\n      if (!(id in this.events)) return false;\n\n      var idx = this.events[id].indexOf(func);\n      if (idx === -1) return false;\n\n      this.events[id][idx] = undefined;\n    }\n  }, {\n    key: 'dispatch',\n    value: function dispatch(id) {\n      var _console;\n\n      if (!(id in this.events)) {\n        DEBUG && console.warn('Emitter:no event found', id);\n        return false;\n      }\n\n      for (var _len = arguments.length, params = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        params[_key - 1] = arguments[_key];\n      }\n\n      DEBUG && (_console = console).log.apply(_console, ['Emitter:dispatch', id].concat(params));\n      for (var i = 0, ln = this.events[id].length; i < ln; i++) {\n        var _events$id;\n\n        (_events$id = this.events[id])[i].apply(_events$id, params);\n      }\n    }\n  }, {\n    key: 'unbindAll',\n    value: function unbindAll() {\n      this.events = {};\n    }\n  }]);\n\n  return Emitter;\n}();\n\nexports.default = Emitter;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _ScriptReader = __webpack_require__(13);\n\nvar _ScriptReader2 = _interopRequireDefault(_ScriptReader);\n\nvar _gamescript = __webpack_require__(3);\n\nvar _gamescript2 = _interopRequireDefault(_gamescript);\n\nvar _events = __webpack_require__(0);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Internal module to handle game state.\n * Responsible for 'pushing out' new messages from the\n * game script and firing events that the tab modules\n * and app shell can respond to.\n *\n * Also handles all internal game logic for what happens\n * when certain events are fired (puzzle completion,\n * choices made by the player, etc)\n *\n * Renders no UI of its own.\n * Uses an Emitter instance passed into it.\n */\n\nvar GameState = function () {\n  function GameState(emitter) {\n    var _eventBindings;\n\n    _classCallCheck(this, GameState);\n\n    this.emitter = emitter;\n    this.reader = new _ScriptReader2.default(_gamescript2.default);\n\n    this.initialChapter = 'intro1';\n\n    this.choiceHistory = [];\n\n    this.puzzleAttemptsLeft = 3;\n    this.totalPuzzles = 9;\n    this.puzzleStatus = [];\n    for (var i = 0; i < this.totalPuzzles; i++) {\n      this.puzzleStatus.push({\n        puzzleID: 0,\n        isComplete: false,\n        isSent: false\n      });\n    }\n\n    this.eventBindings = (_eventBindings = {}, _defineProperty(_eventBindings, _events.EVT_CHOICE_SELECTED, 'handlePlayerDecision'), _defineProperty(_eventBindings, _events.EVT_PUZZLE_FIRST_OPEN, 'handleFirstPuzzleOpen'), _defineProperty(_eventBindings, _events.EVT_PUZZLE_SUCCESS, 'handlePuzzleSuccess'), _defineProperty(_eventBindings, _events.EVT_PUZZLE_DATA_SENT, 'handlePuzzleDataSent'), _defineProperty(_eventBindings, _events.EVT_PUZZLE_FAIL, 'handlePuzzleFail'), _defineProperty(_eventBindings, _events.EVT_SEND_INITIAL_PHOTOS, 'handleFirstPhotos'), _defineProperty(_eventBindings, _events.EVT_ADVANCE_GAME_STATE, 'advance'), _defineProperty(_eventBindings, _events.EVT_FAILGAME, 'handleGameOver'), _eventBindings);\n  }\n\n  _createClass(GameState, [{\n    key: 'init',\n    value: function init() {\n      for (var ev in this.eventBindings) {\n        this.emitter.bind(ev, this[this.eventBindings[ev]], this);\n      }\n\n      this.reader.init(this.initialChapter);\n      this.advance();\n    }\n  }, {\n    key: 'advance',\n    value: function advance() {\n      var _this = this;\n\n      var msg = this.reader.getNextMsg();\n\n      if (msg) {\n        if (msg.event) {\n          console.info('GameState:event bound to message', msg.event);\n          this.emitter.dispatch(msg.event);\n        }\n        if (msg.choices) {\n          this.emitter.dispatch(_events.EVT_CHOICES_RECEIVED, msg);\n        } else {\n          setTimeout(function () {\n            _this.emitter.dispatch(_events.EVT_MESSAGE_RECEIVED, msg);\n            _this.advance();\n          }, 1000); // TODO: calc time to display message\n        }\n      }\n    }\n\n    /** Game logic and advancement callbacks */\n\n  }, {\n    key: 'getCompletedPuzzleCount',\n    value: function getCompletedPuzzleCount() {\n      return this.puzzleStatus.filter(function (p) {\n        return p.isComplete;\n      }).length;\n    }\n  }, {\n    key: 'getSentPuzzleDataCount',\n    value: function getSentPuzzleDataCount() {\n      return this.puzzleStatus.filter(function (p) {\n        return p.isComplete && p.isSent;\n      }).length;\n    }\n  }, {\n    key: 'handlePlayerDecision',\n    value: function handlePlayerDecision(choice) {\n      // TODO: handle game/state logic around selection\n      this.choiceHistory.push(choice);\n      this.reader.startChapter(choice.goto);\n      this.advance();\n    }\n\n    // When phots are first sent/Media tab revealed\n\n  }, {\n    key: 'handleFirstPhotos',\n    value: function handleFirstPhotos() {\n      console.log('handleFirstPhotos');\n      this.emitter.dispatch(_events.EVT_TAB_NOTIFY, 'Media');\n    }\n\n    // Chat tutorial when first decryption attempted\n\n  }, {\n    key: 'handleFirstPuzzleOpen',\n    value: function handleFirstPuzzleOpen() {\n      this.reader.startChapter('tutorial');\n      this.advance();\n    }\n\n    // Called when a puzzle is completed (decrypted)\n\n  }, {\n    key: 'handlePuzzleSuccess',\n    value: function handlePuzzleSuccess(puzzleId) {\n      this.puzzleStatus[puzzleId].isComplete = true;\n\n      // Instructions after completing first puzzle\n      if (this.getCompletedPuzzleCount() === 1) {\n        this.reader.startChapter('firstpuzzlecomplete');\n        this.advance();\n      }\n    }\n\n    // Called when a puzzle data is sent\n\n  }, {\n    key: 'handlePuzzleDataSent',\n    value: function handlePuzzleDataSent(puzzleId) {\n      this.puzzleStatus[puzzleId].isSent = true;\n\n      // Response after first puzzle sent\n      if (this.getSentPuzzleDataCount() === 1) {\n        this.reader.startChapter('firstpuzzlesent');\n        this.advance();\n      }\n    }\n\n    // Fail messages if you screw up\n\n  }, {\n    key: 'handlePuzzleFail',\n    value: function handlePuzzleFail(puzzleId) {\n      this.puzzleAttemptsLeft--;\n\n      if (this.puzzleAttemptsLeft > 1) {\n        this.reader.startChapter('failstate1');\n        this.advance();\n      } else if (this.puzzleAttemptsLeft > 0) {\n        this.reader.startChapter('failstate2');\n        this.advance();\n      } else if (this.puzzleAttemptsLeft === 0) {\n        this.reader.startChapter('failstate3');\n        this.advance();\n      }\n    }\n  }, {\n    key: 'handleGameOver',\n    value: function handleGameOver() {\n      // TODO: game over\n      console.log('GAME OVER');\n    }\n  }]);\n\n  return GameState;\n}();\n\nexports.default = GameState;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Utility class to read 'game script' data and keep\n * track of what chapter/message we're currently on.\n *\n * Exposes method for changing chapter and getting the\n * next message, if available, of the current one.\n */\n\nvar ScriptReader = function () {\n  function ScriptReader(script) {\n    _classCallCheck(this, ScriptReader);\n\n    this.script = script;\n    console.log('ScriptReader', this.script);\n  }\n\n  _createClass(ScriptReader, [{\n    key: 'init',\n    value: function init(id) {\n      this.currentChapter = null;\n      this.currentChapterId = null;\n      this.chapterLength = 0;\n      this.currentChapterMsgIdx = -1;\n\n      if (id) this.startChapter(id);\n    }\n  }, {\n    key: 'startChapter',\n    value: function startChapter(id) {\n      if (id === null) return false;\n\n      if (!(id in this.script.chapters)) {\n        console.warn('ScriptReader: invalid chapter id', id);\n        return false;\n      }\n      this.currentChapter = this.script.chapters[id];\n      this.currentChapterId = id;\n      this.chapterLength = this.currentChapter.length;\n      this.currentChapterMsgIdx = -1;\n    }\n  }, {\n    key: 'getNextMsg',\n    value: function getNextMsg() {\n      if (!this.currentChapter || this.currentChapterMsgIdx === this.chapterLength - 1) {\n        console.info('ScriptReader: no further messages in chapter', this.currentChapterId);\n        return false;\n      }\n      this.currentChapterMsgIdx++;\n      return this.currentChapter[this.currentChapterMsgIdx];\n    }\n  }]);\n\n  return ScriptReader;\n}();\n\nexports.default = ScriptReader;\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _template = __webpack_require__(15);\n\nvar _template2 = _interopRequireDefault(_template);\n\nvar _events = __webpack_require__(0);\n\nvar _chat = __webpack_require__(4);\n\nvar _chat2 = _interopRequireDefault(_chat);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Class representing a Chat tab in the app.\n *\n * Will listen to 'incoming message' events and handle\n * any which have its id attached (see data/gamescript).\n *\n * Responsible for rendering messages and choices in its\n * own tab DOM, and firing appropriate events when the\n * player selects a choice from it.\n *\n * Uses a shared Emitter instance passed into its init()\n */\n\nvar ChatTab = function () {\n  function ChatTab(chatID) {\n    _classCallCheck(this, ChatTab);\n\n    this.chatID = chatID;\n    this.template = _template2.default;\n  }\n\n  _createClass(ChatTab, [{\n    key: 'init',\n    value: function init(moduleId, el, emitter) {\n      this.id = moduleId;\n      this.emitter = emitter;\n\n      this.messageLog = [];\n\n      // Cache refs to internal DOM for messages and choices\n      this.convoPanelEl = el.querySelector('.' + _chat2.default.conversationPanel) || el;\n      this.msgPanelEl = el.querySelector('.' + _chat2.default.msgPanel);\n      this.choicePanelEl = el.querySelector('.' + _chat2.default.choicePanel);\n\n      // Bind events for incoming messages/choices\n      this.emitter.bind(_events.EVT_MESSAGE_RECEIVED, this.handleIncomingMessage, this);\n\n      this.emitter.bind(_events.EVT_CHOICES_RECEIVED, this.handleIncomingMessage, this);\n    }\n  }, {\n    key: 'handleIncomingMessage',\n    value: function handleIncomingMessage(msg) {\n      // Only handle messages for this instance\n      if (msg.chat !== this.chatID) return false;\n\n      if (msg.choices) {\n        // Render in choices panel if there are some\n        this.displayChoices(msg.choices);\n      } else {\n        // Render message output\n        this.displayMessage(msg);\n      }\n      this.emitter.dispatch(_events.EVT_TAB_NOTIFY, this.id);\n    }\n  }, {\n    key: 'displayMessage',\n    value: function displayMessage(msg) {\n      this.clearChoices();\n\n      // Render and log a message\n      var container = document.createElement('div');\n      container.classList.add(_chat2.default.msg, msg.isPlayer ? _chat2.default.player : _chat2.default[msg.chat]);\n      container.textContent = msg.text;\n      this.msgPanelEl.appendChild(container);\n      this.messageLog.push(msg);\n      // Scroll to bottom of panel\n      this.convoPanelEl.scrollTop = this.msgPanelEl.scrollHeight;\n    }\n  }, {\n    key: 'displayChoices',\n    value: function displayChoices(options) {\n      var _this = this;\n\n      // Render choices\n      this.clearChoices();\n\n      options.forEach(function (opt) {\n        var button = document.createElement('button');\n        button.classList.add(_chat2.default.choiceButton);\n        button.setAttribute('type', 'button');\n        button.textContent = opt.text;\n        button.addEventListener('click', function () {\n          // Make sure we render the selection in the\n          // message output\n          _this.displayMessage({\n            chat: _this.chatID,\n            text: opt.text,\n            isPlayer: true\n          });\n          _this.clearChoices();\n          _this.emitter.dispatch(_events.EVT_CHOICE_SELECTED, opt);\n        });\n        _this.choicePanelEl.appendChild(button);\n      });\n      // Scroll to the bottom of the panel\n      if (this.convoPanelEl.offsetHeight < this.msgPanelEl.scrollHeight) {\n        this.convoPanelEl.scrollTop = this.convoPanelEl.scrollHeight;\n      }\n    }\n  }, {\n    key: 'clearChoices',\n    value: function clearChoices() {\n      this.choicePanelEl.innerHTML = '';\n    }\n  }]);\n\n  return ChatTab;\n}();\n\nexports.default = ChatTab;\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _chat = __webpack_require__(4);\n\nvar _chat2 = _interopRequireDefault(_chat);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = '\\n<div class=\"' + _chat2.default.conversationPanel + '\">\\n    <div class=\"' + _chat2.default.msgPanel + '\"></div>\\n    <div class=\"' + _chat2.default.choicePanel + '\"></div>\\n</div>\\n';\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _media = __webpack_require__(5);\n\nvar _media2 = _interopRequireDefault(_media);\n\nvar _main = __webpack_require__(1);\n\nvar _template = __webpack_require__(17);\n\nvar _template2 = _interopRequireDefault(_template);\n\nvar _files = __webpack_require__(18);\n\nvar _files2 = _interopRequireDefault(_files);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar MediaTab = function () {\n  function MediaTab() {\n    _classCallCheck(this, MediaTab);\n\n    this.template = _template2.default;\n  }\n\n  _createClass(MediaTab, [{\n    key: 'init',\n    value: function init(moduleId, el, emitter) {\n      var _this = this;\n\n      this.id = moduleId;\n      this.emitter = emitter;\n\n      this.mediaPanel = el.querySelector('.' + _media2.default.mediaPanel) || el;\n      this.mediaDetail = el.querySelector('.' + _media2.default.mediaDetail);\n      this.mediaDetail.querySelector('#detail-cancel').addEventListener('click', function () {\n        _this.closeDetails();\n      });\n      this.mediaDetail.querySelector('#detail-submit').addEventListener('click', function () {\n        _this.checkPasscode();\n      });\n      setTimeout(function () {\n        _this.releasePhoto(0);\n        _this.releasePhoto(1);\n      }, 0);\n    }\n  }, {\n    key: 'releasePhoto',\n    value: function releasePhoto(index) {\n      var _this2 = this;\n\n      if (index >= _files2.default.length) {\n        return;\n      }\n\n      var imgContainer = this.mediaPanel.querySelector('[data-index=\"' + index + '\"]');\n      var imgEl = document.createElement('img');\n      imgEl.src = _files2.default[index];\n      imgEl.addEventListener('click', function () {\n        _this2.expandPhoto(imgEl);\n      });\n\n      imgContainer.classList.remove(_media2.default.unavailable);\n      imgContainer.appendChild(imgEl);\n    }\n  }, {\n    key: 'expandPhoto',\n    value: function expandPhoto(imgEl) {\n      this.mediaDetail.insertBefore(imgEl.cloneNode(false), this.mediaDetail.firstChild);\n      this.mediaDetail.classList.remove(_main.hidden);\n    }\n  }, {\n    key: 'closeDetails',\n    value: function closeDetails() {\n      this.mediaDetail.removeChild(this.mediaDetail.firstChild);\n      this.mediaDetail.classList.add(_main.hidden);\n    }\n  }, {\n    key: 'checkPasscode',\n    value: function checkPasscode() {\n      // TODO: Check the passcode, return error if wrong\n      // If correct, close detail view and pass control to puzzle\n      this.closeDetails();\n    }\n  }]);\n\n  return MediaTab;\n}();\n\nexports.default = MediaTab;\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _media = __webpack_require__(5);\n\nvar _media2 = _interopRequireDefault(_media);\n\nvar _main = __webpack_require__(1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar imgContainersTemplate = '';\n\nfor (var i = 0; i < 9; i++) {\n    imgContainersTemplate += '<div data-index=\"' + i + '\" class=\"' + _media2.default.imageThumbnail + ' ' + _media2.default.unavailable + '\"></div>';\n}\n\nexports.default = '\\n<div class=\"' + _media2.default.mediaPanel + '\">\\n    <div class=\"' + _media2.default.mediaList + '\">' + imgContainersTemplate + '</div>\\n    <div class=\"' + _media2.default.mediaDetail + ' ' + _main.hidden + '\">\\n        <div class=\"' + _media2.default.formRow + '\">\\n            <label>Passcode:</label>\\n            <input type=\"text\" name=\"passcode\">\\n        </div>\\n        <div class=\"' + _media2.default.formRow + '\">\\n            <button id=\"detail-submit\" type=\"button\">Enter</button>\\n            <button id=\"detail-cancel\" type=\"button\">Cancel</button>\\n        </div>\\n    </div>\\n</div>\\n';\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _location = __webpack_require__(19);\n\nvar _location2 = _interopRequireDefault(_location);\n\nvar _location3 = __webpack_require__(20);\n\nvar _location4 = _interopRequireDefault(_location3);\n\nvar _location5 = __webpack_require__(21);\n\nvar _location6 = _interopRequireDefault(_location5);\n\nvar _location7 = __webpack_require__(22);\n\nvar _location8 = _interopRequireDefault(_location7);\n\nvar _location9 = __webpack_require__(23);\n\nvar _location10 = _interopRequireDefault(_location9);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = [_location2.default, _location4.default, _location6.default, _location8.default, _location10.default];\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"assets/39e3bf07418437d0ac0f0eed58c3c1f5.jpg\";\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"assets/d1ca928fb6bf6590e987636528bc2d57.jpg\";\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"assets/7d1dcda134565bb3865c195aaae3f876.jpg\";\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"assets/6bf32f35b5a054497897c1fe848b7932.jpg\";\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"assets/39d2614c41346f19b5f0e1133488a150.jpg\";\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// index.bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 65c19ef82422588db5fc","/**\n * Shared event manifest for the entire app to use.\n */\n\nexport const EVT_MESSAGE_RECEIVED = 'EVT_MESSAGE_RECEIVED'\nexport const EVT_CHOICES_RECEIVED = 'EVT_CHOICES_RECEIVED'\nexport const EVT_SEND_INITIAL_PHOTOS = 'EVT_SEND_INITIAL_PHOTOS'\nexport const EVT_CHOICE_SELECTED = 'EVT_CHOICE_SELECTED'\nexport const EVT_PUZZLE_SUCCESS = 'EVT_PUZZLE_SUCCESS'\nexport const EVT_PUZZLE_DATA_SENT = 'EVT_PUZZLE_DATA_SENT'\nexport const EVT_PUZZLE_FAIL = 'EVT_PUZZLE_FAIL'\nexport const EVT_ADVANCE_GAME_STATE = 'EVT_ADVANCE_GAME_STATE'\nexport const EVT_TAB_NOTIFY = 'EVT_TAB_NOTIFY'\nexport const EVT_PUZZLE_FIRST_OPEN = 'EVT_PUZZLE_FIRST_OPEN'\nexport const EVT_FAILGAME = 'EVT_FAILGAME'\n\n\n\n// WEBPACK FOOTER //\n// ./src/data/events.js","// removed by extract-text-webpack-plugin\nmodule.exports = {\"hidden\":\"shared__main__hidden_116d0f\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/shared/main.css\n// module id = 1\n// module chunks = 0","// removed by extract-text-webpack-plugin\nmodule.exports = {\"winBlue\":\"#2b0081\",\"appWrapper\":\"app__style__appWrapper_51bd3e\",\"appHeader\":\"app__style__appHeader_320435\",\"closeBut\":\"app__style__closeBut_d04839\",\"tabNav\":\"app__style__tabNav_1038d3\",\"activeTab\":\"app__style__activeTab_d5cd6c\",\"visibleTab\":\"app__style__visibleTab_b40f2e\",\"tabNotify\":\"app__style__tabNotify_f5199c\",\"appTabWindow\":\"app__style__appTabWindow_d994a7\",\"appTabWrapper\":\"app__style__appTabWrapper_c83871\",\"activeContent\":\"app__style__activeContent_cc741e\",\"appFooter\":\"app__style__appFooter_413425\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/style.css\n// module id = 2\n// module chunks = 0","import * as Events from './events'\n\n/**\n * The game 'script'.\n * Defines 'chapters' of the story made up of a list of\n * chat messages.\n *\n * A message can have the following props:\n *\n *  - chat: which chat window this belongs to\n *  - text: text to be shown for the message\n *  - event: an event which the GameState can fire when this message is received\n *  - choices: an array of options for the player to choose from\n *\n * Choices can have the following:\n *\n *  - text: label for the option\n *  - goto: which chapter ID to go to when this option is selected\n *\n */\n\nexport const CHAT_A = 'agentA'\nexport const CHAT_B = 'agentB'\n\nexport default {\n  chapters: {\n    'intro1': [\n      {\n        chat: CHAT_A,\n        text: '*** INCOMING TRANSMISSION... ***',\n      },\n      {\n        chat: CHAT_A,\n        text: 'Agent 045, you have now been activated. Please respond.'\n      },\n      {\n        chat: CHAT_A,\n        choices: [\n          {\n            text: 'Uh, I think you have the wrong number',\n            goto: 'activated',\n          },\n          {\n            text: 'This is Agent 045, waiting command',\n            goto: 'activated',\n          }\n        ]\n      }\n    ],\n\n    'activated': [\n      {\n        chat: CHAT_A,\n        text: 'Ah good, you’re there. We have a situation here that we need you immediate assistance with.'\n      },\n      {\n        chat: CHAT_A,\n        text: 'We’ve been locked out of remote access points in your area that we need reconnected to asap.'\n      },\n      {\n        chat: CHAT_A,\n        text: 'We need you to locate the access points, get pass the encryption software, and wire through the information packs directly via uplink.'\n      },\n      {\n        chat: CHAT_A,\n        text: 'Unfortunately due to the hack, we don’t have exact geolocations, only images of the locations in question, but they’re all near by and should be easy enough to find, given your familiarity with the area.',\n      },\n      {\n        chat: CHAT_A,\n        choices: [\n          {\n            text: 'What do you mean by \"the hack\"?',\n            goto: 'noquestions',\n          },\n          {\n            text: 'What is this?!',\n            goto: 'noquestions',\n          }\n        ]\n      }\n    ],\n\n    'noquestions': [\n      {\n        chat: CHAT_A,\n        text: 'We don’t have time for questions right now Agent 045, please get the information packets as soon as possible. The security of the entire world is at stake.'\n      },\n      {\n        chat: CHAT_A,\n        text: 'Check your Media tab, there you’ll find the 5 remote access points we need you to reconnect to command.',\n        event: Events.EVT_SEND_INITIAL_PHOTOS\n      },\n      {\n        chat: CHAT_A,\n        text: 'When you find an access point, look for our logo, you’ll find a password that you need to input to corresponding photo.'\n      },\n      {\n        chat: CHAT_A,\n        text: 'We’ll contact you again when you’ve reached access point 1.'\n      },\n      {\n        chat: CHAT_A,\n        choices: [\n          {\n            text: 'O...k?',\n            goto: null,\n          },\n          {\n            text: 'Understood command, over and out',\n            goto: null,\n          }\n        ]\n      }\n    ],\n\n    'tutorial': [\n      {\n        chat: CHAT_A,\n        text: 'Well done Agent 045, this is excellent.'\n      },\n      {\n        chat: CHAT_A,\n        text: 'Now you just have to decode the access to enable us to download the package.'\n      },\n      {\n        chat: CHAT_A,\n        text: 'It should be extremely straightforward for someone of your elite skill set.'\n      },\n      {\n        chat: CHAT_A,\n        text: 'Simply slides the blocks into the right location and we should be granted access.'\n      }\n    ],\n\n    'firstpuzzlecomplete': [\n      {\n        chat: CHAT_A,\n        text: 'Perfect Agent 045, now please send the information packed to us over your secure network connection.'\n      }\n    ],\n\n    'firstpuzzlesent': [\n      {\n        chat: CHAT_A,\n        text: 'Fantastic work Agent 045, please proceed to the next package for more information.',\n        event: Events.EVT_FIRST_NEWS_ARTICLE\n      }\n    ],\n\n    'strangepackage': [\n      {\n      \tchoices: [\n          {\n            text: 'What is this text about?',\n            goto: 'donotread',\n          },\n          {\n            text: 'Sir, this packet is quite odd…',\n            goto: 'donotread',\n          }\n        ]\n      }\n    ],\n\n    'donotread': [\n      {\n        chat: CHAT_A,\n        text: 'Agent 045, are you READING the highly CLASSIFIED information in these packets?!'\n      },\n      {\n        chat: CHAT_A,\n        text: 'Because we need you to access the files to send them to us, you’ll inherently gain access, but I am stressing that these are HIGHLY CLASSIFIED FILES.'\n      },\n      {\n        chat: CHAT_A,\n        text: 'DO NOT READ THEM UNDER ANY CIRCUMSTANCES.'\n      },\n      {\n        chat: CHAT_A,\n        text: 'IT IS A FEDERAL OFFENCE TO READ THESE FILES WITHOUT THE CORRECT LEVEL OF AUTHORISATION.'\n      },\n      {\n        chat: CHAT_A,\n        text: 'Do no read the files, just send them straight to us, understand? That’s a command soldier.'\n      },\n      {\n        chat: CHAT_A,\n        choices: [\n          {\n            text: 'Understood sir. ',\n            goto: null,\n          },\n          {\n            text: 'Or what?',\n            goto: 'yourownrisk',\n          }\n        ]\n      }\n    ],\n\n    'yourownrisk': [\n      {\n        chat: CHAT_A,\n        text: '…'\n      },\n      {\n        chat: CHAT_A,\n        text: 'Well, I guess there’s nothing we can do, we need those files.'\n      },\n      {\n        chat: CHAT_A,\n        text: 'Read them at your own risk, just send them to us. We’ll sort that issue once we get this resolved.'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Agent 045. Do not trust Agent B.'\n      },\n      {\n      \tchat: CHAT_B,\n        choices: [\n          {\n            text: 'What do you mean?',\n            goto: 'thewarning',\n          },\n          {\n            text: 'I have no idea what you’re talking about.',\n            goto: 'thewarning',\n          }\n        ]\n      }\n    ],\n\n    'thewarning': [\n      {\n        chat: CHAT_B,\n        text: 'You’ve been warned.'\n      },\n      {\n      \tchat: CHAT_B,\n        choices: [\n          {\n            text: 'Wait! I want to know what’s going on!',\n            goto: null,\n          },\n          {\n            text: 'I don’t know you, be gone scum.',\n            event: Events.EVT_SECOND_NEWS_ARTICLE,\n            goto: null,\n          }\n        ]\n      }\n    ],\n\n    'readfile': [\n      {\n        chat: CHAT_B,\n        text: 'Read the file.'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Do you see the kind of information you’re dealing with here.'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Do you really trust this kind of information with Agent B?'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Do you even know who they are?'\n      },\n      {\n      \tchat: CHAT_B,\n        choices: [\n          {\n            text: 'Well who are you then?',\n            goto: 'foolish',\n          },\n          {\n            text: 'Do you know who they are?',\n            goto: 'foolish',\n          }\n        ]\n      }\n    ],\n\n    'foolish': [\n      {\n        chat: CHAT_B,\n        text: 'Don’t be foolish.'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Keep your wits about you.'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Don’t blindly do what they tell you too.'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Don’t tell them about our conversation.'\n      },\n      {\n        chat: CHAT_A,\n        text: 'What was that?'\n      },\n      {\n        chat: CHAT_A,\n        text: 'Keep your wits about you.'\n      },\n      {\n        chat: CHAT_A,\n        text: 'Did you do something?'\n      },\n      {\n      \tchat: CHAT_A,\n        choices: [\n          {\n            text: 'What do you mean?',\n            goto: 'oddsignal',\n          }\n        ]\n      }\n    ],\n\n    'oddsignal': [\n      {\n        chat: CHAT_A,\n        text: ' I picked up an odd signal there.'\n      },\n      {\n        chat: CHAT_A,\n        text: 'It was very faint, but I thought I saw…'\n      },\n      {\n        chat: CHAT_A,\n        text: 'Maybe it was nothing. Did you see anything strange?'\n      },\n      {\n      \tchat: CHAT_A,\n        choices: [\n          {\n            text: 'Nothing on this end.',\n            goto: 'wisechoice',\n          },\n          {\n            text: 'Do you mean Agent R?',\n            goto: 'unwisechoice',\n          }\n        ]\n      }\n    ],\n\n    'wisechoice': [\n      {\n        chat: CHAT_A,\n        text: ' Ok. Just let me know if you anything comes up.'\n      },\n      {\n        chat: CHAT_B,\n        text: 'If you continue with this, I can share an extra information pack with you.'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Keep up the pretense.'\n      },\n      {\n      \tchat: CHAT_B,\n        choices: [\n          {\n            text: 'Who are you?',\n            goto: 'goingon',\n          },\n          {\n            text: 'What’s going on?',\n            event: Events.EVT_THIRD_NEWS_ARTICLE,\n            goto: 'goingon',\n          }\n        ]\n      }\n    ],\n\n    'goingon': [\n      {\n        chat: CHAT_B,\n        text: ' That’s not important right now. The safety of the world is at stake, just make it to the packets and I’ll tell you what to do from there. '\n      }\n    ],\n\n    'unwisechoice': [\n      {\n        chat: CHAT_A,\n        text: ' Agent R?! DO NOT ENGAGE, I repeat, DO NOT ENGAGE with Agent R! They are not to be trusted! '\n      },\n      {\n        chat: CHAT_A,\n        text: 'Do not engage them under any circumstances. They are the enemy.'\n      },\n      {\n        chat: CHAT_B,\n        text: 'What have you done! Do you want to destroy us all?!'\n      },\n      {\n        chat: CHAT_B,\n        text: 'If you do as Agent B says, we’re all doomed!'\n      },\n      {\n      \tchat: CHAT_B,\n        choices: [\n          {\n            text: 'How am I meant to trust you?',\n            goto: 'trust',\n          },\n          {\n            text: 'Why?!',\n            goto: 'trust',\n          }\n        ]\n      }\n    ],\n\n    'trust': [\n      {\n        chat: CHAT_B,\n        text: ' There’s no time to explain right now, you just have to trust me.'\n      },\n      {\n        chat: CHAT_B,\n        text: ' Get to the next info packet. Act as normal.'\n      },\n      {\n        chat: CHAT_B,\n        text: ' If you’re interested in saving the planet, you’ll do as I say.',\n        event: Events.EVT_THIRD_NEWS_ARTICLE,\n      }\n    ],\n\n    'helloagents': [\n      {\n        chat: CHAT_B,\n        text: 'Agent B: So, here you are.'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Agent R: I guess you found me.'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Agent B: We’ve tracked you Agent R. You’ve nowhere to hide.'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Agent R: We won’t let you get a hold of the info packet.'\n      },\n      {\n       \tchat: CHAT_B,\n        choices: [\n          {\n            text: 'You’re damn right!',\n            goto: 'agentb1',\n          },\n          {\n            text: 'I don’t think so.',\n            goto: 'agentr1',\n          }\n        ]\n      }\n    ],\n\n    'agentb1': [\n      {\n        chat: CHAT_B,\n        text: 'Agent B: Ha!'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Agent R: 045… I thought you were better than this.'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Agent R: You’re signing your own death warrant.'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Agent B: Don’t be ridiculous.'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Agent B: Get to the last info point Agent 045.'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Agent B: Then we can annihilate this scum.'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Agent R: There’s still time.'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Agent R: I hope that when the time comes, you’ll make the right choice.'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Agent B: Idiot. '\n      }\n    ],\n\n    'agentr1': [\n      {\n        chat: CHAT_B,\n        text: 'Agent B: Excuse me??'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Agent R: I think you heard them B.'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Agent R: They won’t be helping you anymore.'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Agent B: Are you an idiot?!'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Agent B: You’ll be helping a physcopath!'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Agent B: This will start world war 3!'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Agent R: Don’t waste your breath B. They’ve made their choice.'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Agent R: We won’t start a war, we’ll be ending it.'\n      },\n        {\n        chat: CHAT_B,\n        text: 'Agent B: I beg of you, please. You still have time to change your mind.'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Agent B: When the time comes, send the pack to me.'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Agent B: Idiot.',\n        event: Events.EVT_FOURTH_NEWS_ARTICLE\n      }\n    ],\n\n    'bluepacket': [\n      {\n        chat: CHAT_B,\n        text: 'Agent B: Well done Agent 045, you’ve made the correct decision.'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Agent R: Oh god. What have you done.'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Agent B: Exactly what he was meant to, R.'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Agent B: I hope you’ve enjoyed your time on this earth.'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Agent B: You will be rewarded Agent 045.'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Agent R: You’ve doomed us all.',\n        event: Events.EVT_FIFTHB_NEWS_ARTICLE\n      }\n    ],\n\n    'redpacket': [\n      {\n        chat: CHAT_B,\n        text: 'Agent R: Well done Agent 045, you’ve made the correct decision.'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Agent B: Oh god. What have you done.'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Agent R: Exactly what he was meant to, R.'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Agent R: I hope you’ve enjoyed your time on this earth.'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Agent R: You will be rewarded Agent 045.'\n      },\n      {\n        chat: CHAT_B,\n        text: 'Agent B: You’ve doomed us all.',\n        event: Events.EVT_FIFTHR_NEWS_ARTICLE\n      }\n    ],\n\n    'failstate1': [\n      {\n        chat: CHAT_A,\n        text: '045! Be very careful, you’ll get locked out if you try to hack the access point incorrectly.'\n      }\n    ],\n\n    'failstate2': [\n      {\n        chat: CHAT_A,\n        text: 'Agent. This is your last warning. DO NOT FAIL AGAIN.'\n      }\n    ],\n\n    'failstate3': [\n      {\n        chat: CHAT_A,\n        text: 'You’ve proven yourself unable to handle this mission. You will not be contacted again.',\n        event: Events.EVT_FAILGAME\n      }\n    ]\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/data/gamescript.js","// removed by extract-text-webpack-plugin\nmodule.exports = {\"chatBlue\":\"#d1d1ff\",\"chatGreen\":\"#d1ffd1\",\"chatRed\":\"#ffd1d1\",\"conversationPanel\":\"chat__chat__conversationPanel_982aae\",\"msgPanel\":\"chat__chat__msgPanel_128da4\",\"msg\":\"chat__chat__msg_40734c\",\"reveal\":\"chat__chat__reveal_91caa2\",\"agentA\":\"chat__chat__agentA_b11783\",\"agentB\":\"chat__chat__agentB_1dd93a\",\"player\":\"chat__chat__player_ecf56e\",\"choicePanel\":\"chat__chat__choicePanel_29a146\",\"choiceButton\":\"chat__chat__choiceButton_913795\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/modules/chat/chat.css\n// module id = 4\n// module chunks = 0","// removed by extract-text-webpack-plugin\nmodule.exports = {\"mediaPanel\":\"media__media__mediaPanel_b4417a\",\"mediaList\":\"media__media__mediaList_437845\",\"imageThumbnail\":\"media__media__imageThumbnail_cfdc06\",\"unavailable\":\"media__media__unavailable_405d0b\",\"mediaDetail\":\"media__media__mediaDetail_de48e3\",\"formRow\":\"media__media__formRow_c89747\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/modules/media/media.css\n// module id = 5\n// module chunks = 0","import 'shared/main.css'\nimport './manifest.json'\n\nimport App from './app'\n\nconsole.log('Kick off')\nconst app = new App()\n\nconst SKIP_INTRO = false\n\nif (SKIP_INTRO) {\n  app.start()\n} else {\n  const startBut = document.querySelector('#splash-inner button')\n  startBut.addEventListener('click', e => {\n    document.querySelector('#splash-inner').style.display = 'none'\n    setTimeout(() => {\n      app.start()\n    }, 1000)\n  })\n\n  //window.addEventListener('beforeunload', e => { e.returnValue = 'Really quit?' })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = __webpack_public_path__ + \"/manifest.json\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/manifest.json\n// module id = 7\n// module chunks = 0","import { dom } from 'shared/utils'\nimport template from './template'\nimport styles from './style.css'\n\nimport Emitter from 'core/Emitter'\nimport GameState from './GameState'\nimport ChatTab from 'modules/chat/ChatTab'\nimport MediaTab from 'modules/media/MediaTab'\n\nimport { CHAT_A, CHAT_B } from 'data/gamescript'\nimport { EVT_TAB_NOTIFY } from 'data/events'\n\n/**\n * Main app UI class.\n *\n * - Composes the tab modules, event emitter and game\n * state\n * - Determines the available tabs and their default state\n * - Handles tab switching and visibility/rendering\n * - Initialises the tab modules\n * - Shares an Emitter instance between itself, game state and tab modules\n */\n\nclass App {\n  constructor() {\n    this.initialTabId = 'ChatA'\n\n    this.appEl = document.body\n    this.tabData = [\n      {\n        id: 'ChatA',\n        label: '???',\n        visible: true,\n        module: new ChatTab(CHAT_A)\n      },\n      {\n        id: 'ChatB',\n        label: '???',\n        visible: false,\n        module: new ChatTab(CHAT_B)\n      },\n      {\n        id: 'Media',\n        label: 'Media',\n        visible: false,\n        module: new MediaTab()\n      }\n    ]\n    this.tabDataIds = this.tabData.map(td => td.id)\n\n    this.emitter = new Emitter()\n    this.gamestate = new GameState(this.emitter)\n\n    window.emitter = this.emitter\n  }\n\n  start() {\n    // Render app shell\n    this.el = dom(template)\n    this.appEl.innerHTML = ''\n    this.appEl.appendChild(this.el)\n\n    // Header close button\n    this.closeButEl = this.el.querySelector(`.${styles.closeBut}`)\n    this.closeButEl.addEventListener('click', e => {\n      window.location.reload()\n    })\n\n    // DOM areas for nav and content\n    this.navEl = this.el.querySelector(`.${styles.tabNav}`)\n    this.contentEl = this.el.querySelector(`.${styles.appTabWindow}`)\n\n    // Handle tab modules\n    this.tabData.forEach((tdata, idx) => {\n\n      // Create nav item\n      const tabNavEl = document.createElement('button')\n      tabNavEl.textContent = tdata.id\n      tabNavEl.dataset.tabId = tdata.id\n      if (tdata.visible) tabNavEl.classList.add(styles.visibleTab)\n\n      tabNavEl.addEventListener('click', e => {\n        const t = e.srcElement\n        this.setActiveTab(t.dataset.tabId)\n      })\n\n      this.navEl.appendChild(tabNavEl)\n      tdata._navEl = tabNavEl\n\n      // Init module\n      if (!tdata.module) return false\n\n      // Render tab template into container\n      const tabWrapEl = document.createElement('div')\n      tabWrapEl.classList.add(styles.appTabWrapper)\n      const tabContentEl = dom(tdata.module.template)\n      tabWrapEl.appendChild(tabContentEl)\n      this.contentEl.appendChild(tabWrapEl)\n\n      tdata._wrapEl = tabWrapEl\n      tdata._contentEl = tabContentEl\n\n      tdata.module.init(tdata.id, tabContentEl, this.emitter)\n    })\n\n    // Show notification on tabs if not the current one\n    this.emitter.bind(EVT_TAB_NOTIFY, (tabId) => {\n      if (tabId !== this.activeTab) {\n        this.setTabNotification(tabId)\n      }\n    }, this)\n\n    // Render initial tab\n    this.setActiveTab(this.initialTabId)\n    this.gamestate.init()\n  }\n\n  setActiveTab(tabId) {\n    const tidx = this.tabDataIds.indexOf(tabId)\n    if (tidx === -1 || !this.tabData[tidx].visible) return false\n\n    this.tabData.forEach(tab => {\n      const fn = (tab.id === tabId) ? 'add' : 'remove'\n      tab._navEl.classList[fn](styles.activeTab)\n      tab._wrapEl.classList[fn](styles.activeContent)\n      if (tab.id === tabId) tab._navEl.classList.remove(styles.tabNotify)\n    })\n\n    this.activeTab = tabId\n\n    return true\n  }\n\n  setTabVisibility(tabId, isVisible = true) {\n    const tidx = this.tabDataIds.indexOf(tabId)\n    if (tidx === -1) return false\n\n    const fn = (isVisible) ? 'add' : 'remove'\n    this.tabData[tidx]._navEl.classList[fn](styles.visibleTab)\n    this.tabData[tidx]._wrapEl.classList[fn](styles.visibleContent)\n    this.tabData[tidx].visible = isVisible\n  }\n\n  setTabNotification(tabId) {\n    if (tabId === this.activeTab) return false\n\n    const tidx = this.tabDataIds.indexOf(tabId)\n    if (tidx === -1) return false\n\n    this.setTabVisibility(tabId, true)\n    this.tabData[tidx]._navEl.classList.add(styles.tabNotify)\n  }\n}\n\nexport default App\n\n\n// WEBPACK FOOTER //\n// ./src/app/index.js","\nexport function dom (tplStr) {\n  const wrap = document.createElement('template')\n  wrap.innerHTML = tplStr\n  return wrap.content.firstElementChild\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/shared/utils.js","import style from './style.css'\n\nexport default `\n<div id=\"main\" class=\"${style.appWrapper}\">\n  <header class=\"${style.appHeader}\">\n    <h1>ISeekU v1.0.3a</h1>\n    <button class=\"${style.closeBut}\">X</button>\n  </header>\n  <nav class=\"${style.tabNav}\">\n  </nav>\n  <div class=\"${style.appTabWindow}\">\n    <!-- render tab contents here -->\n  </div>\n  <footer class=\"${style.appFooter}\">\n    Ready\n  </footer>\n</div>`\n\n\n// WEBPACK FOOTER //\n// ./src/app/template.js","const DEBUG = false\n/**\n * Basic event bus/dispatcher.\n */\nclass Emitter {\n  constructor() {\n    this.events = {}\n  }\n\n  bind(id, func, ctx) {\n    if (!(id in this.events)) {\n      DEBUG && console.log('Emitter:new event', id)\n      this.events[id] = []\n    }\n    this.events[id].push(func.bind(ctx))\n    return func\n  }\n\n  unbind(id, func) {\n    if (!(id in this.events)) return false\n\n    const idx = this.events[id].indexOf(func)\n    if (idx === -1) return false\n\n    this.events[id][idx] = undefined\n  }\n\n  dispatch(id, ...params) {\n    if (!(id in this.events)) {\n      DEBUG && console.warn('Emitter:no event found', id)\n      return false\n    }\n    DEBUG && console.log('Emitter:dispatch', id, ...params)\n    for (let i = 0, ln = this.events[id].length; i < ln; i++) {\n      this.events[id][i](...params)\n    }\n  }\n\n  unbindAll() {\n    this.events = {}\n  }\n}\n\nexport default Emitter\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/Emitter.js","import ScriptReader from 'core/ScriptReader'\nimport gamescript, { CHAT_A, CHAT_B } from 'data/gamescript'\nimport {\n  EVT_ADVANCE_GAME_STATE,\n  EVT_CHOICE_SELECTED,\n  EVT_CHOICES_RECEIVED,\n  EVT_MESSAGE_RECEIVED,\n  EVT_PUZZLE_FAIL,\n  EVT_PUZZLE_SUCCESS,\n  EVT_PUZZLE_FIRST_OPEN,\n  EVT_PUZZLE_DATA_SENT,\n  EVT_TAB_NOTIFY,\n  EVT_SEND_INITIAL_PHOTOS,\n  EVT_FAILGAME\n} from 'data/events'\n\n/**\n * Internal module to handle game state.\n * Responsible for 'pushing out' new messages from the\n * game script and firing events that the tab modules\n * and app shell can respond to.\n *\n * Also handles all internal game logic for what happens\n * when certain events are fired (puzzle completion,\n * choices made by the player, etc)\n *\n * Renders no UI of its own.\n * Uses an Emitter instance passed into it.\n */\n\nclass GameState {\n  constructor(emitter) {\n    this.emitter = emitter\n    this.reader = new ScriptReader(gamescript)\n\n    this.initialChapter = 'intro1'\n\n    this.choiceHistory = []\n\n    this.puzzleAttemptsLeft = 3\n    this.totalPuzzles = 9\n    this.puzzleStatus = []\n    for (let i = 0; i < this.totalPuzzles; i++) {\n      this.puzzleStatus.push({\n        puzzleID: 0,\n        isComplete: false,\n        isSent: false\n      })\n    }\n\n    this.eventBindings = {\n      [EVT_CHOICE_SELECTED]: 'handlePlayerDecision',\n      [EVT_PUZZLE_FIRST_OPEN]: 'handleFirstPuzzleOpen',\n      [EVT_PUZZLE_SUCCESS]: 'handlePuzzleSuccess',\n      [EVT_PUZZLE_DATA_SENT]: 'handlePuzzleDataSent',\n      [EVT_PUZZLE_FAIL]: 'handlePuzzleFail',\n      [EVT_SEND_INITIAL_PHOTOS]: 'handleFirstPhotos',\n      [EVT_ADVANCE_GAME_STATE]: 'advance',\n      [EVT_FAILGAME]: 'handleGameOver'\n    }\n  }\n\n  init() {\n    for (let ev in this.eventBindings) {\n      this.emitter.bind(ev, this[this.eventBindings[ev]], this)\n    }\n\n    this.reader.init(this.initialChapter)\n    this.advance()\n  }\n\n  advance() {\n    const msg = this.reader.getNextMsg()\n\n    if (msg) {\n      if (msg.event) {\n        console.info('GameState:event bound to message', msg.event)\n        this.emitter.dispatch(msg.event)\n      }\n      if (msg.choices) {\n        this.emitter.dispatch(EVT_CHOICES_RECEIVED, msg)\n      } else {\n        setTimeout(() => {\n          this.emitter.dispatch(EVT_MESSAGE_RECEIVED, msg)\n          this.advance()\n        }, 1000) // TODO: calc time to display message\n      }\n    }\n  }\n\n  /** Game logic and advancement callbacks */\n\n  getCompletedPuzzleCount() {\n    return this.puzzleStatus.filter(p => p.isComplete).length\n  }\n\n  getSentPuzzleDataCount() {\n    return this.puzzleStatus.filter(p => p.isComplete && p.isSent).length\n  }\n\n  handlePlayerDecision(choice) {\n    // TODO: handle game/state logic around selection\n    this.choiceHistory.push(choice)\n    this.reader.startChapter(choice.goto)\n    this.advance()\n  }\n\n  // When phots are first sent/Media tab revealed\n  handleFirstPhotos() {\n    console.log('handleFirstPhotos')\n    this.emitter.dispatch(EVT_TAB_NOTIFY, 'Media')\n  }\n\n  // Chat tutorial when first decryption attempted\n  handleFirstPuzzleOpen() {\n    this.reader.startChapter('tutorial')\n    this.advance()\n  }\n\n  // Called when a puzzle is completed (decrypted)\n  handlePuzzleSuccess(puzzleId) {\n    this.puzzleStatus[puzzleId].isComplete = true\n\n    // Instructions after completing first puzzle\n    if (this.getCompletedPuzzleCount() === 1) {\n      this.reader.startChapter('firstpuzzlecomplete')\n      this.advance()\n    }\n  }\n\n  // Called when a puzzle data is sent\n  handlePuzzleDataSent(puzzleId) {\n    this.puzzleStatus[puzzleId].isSent = true\n\n    // Response after first puzzle sent\n    if (this.getSentPuzzleDataCount() === 1) {\n      this.reader.startChapter('firstpuzzlesent')\n      this.advance()\n    }\n  }\n\n  // Fail messages if you screw up\n  handlePuzzleFail(puzzleId) {\n    this.puzzleAttemptsLeft--\n\n    if (this.puzzleAttemptsLeft > 1) {\n      this.reader.startChapter('failstate1')\n      this.advance()\n    } else if (this.puzzleAttemptsLeft > 0) {\n      this.reader.startChapter('failstate2')\n      this.advance()\n    } else if (this.puzzleAttemptsLeft === 0) {\n      this.reader.startChapter('failstate3')\n      this.advance()\n    }\n  }\n\n  handleGameOver() {\n    // TODO: game over\n    console.log('GAME OVER')\n  }\n\n}\n\nexport default GameState\n\n\n// WEBPACK FOOTER //\n// ./src/app/GameState.js","/**\n * Utility class to read 'game script' data and keep\n * track of what chapter/message we're currently on.\n *\n * Exposes method for changing chapter and getting the\n * next message, if available, of the current one.\n */\n\nclass ScriptReader {\n  constructor(script) {\n    this.script = script\n    console.log('ScriptReader', this.script)\n  }\n\n  init(id) {\n    this.currentChapter = null\n    this.currentChapterId = null\n    this.chapterLength = 0\n    this.currentChapterMsgIdx = -1\n\n    if (id) this.startChapter(id)\n  }\n\n  startChapter(id) {\n    if (id === null) return false\n\n    if (!(id in this.script.chapters)) {\n      console.warn('ScriptReader: invalid chapter id', id)\n      return false\n    }\n    this.currentChapter = this.script.chapters[id]\n    this.currentChapterId = id\n    this.chapterLength = this.currentChapter.length\n    this.currentChapterMsgIdx = -1\n  }\n\n  getNextMsg() {\n    if (!this.currentChapter || this.currentChapterMsgIdx === this.chapterLength - 1) {\n      console.info('ScriptReader: no further messages in chapter', this.currentChapterId)\n      return false\n    }\n    this.currentChapterMsgIdx++\n    return this.currentChapter[this.currentChapterMsgIdx]\n  }\n}\n\nexport default ScriptReader\n\n\n// WEBPACK FOOTER //\n// ./src/core/ScriptReader.js","import template from './template'\nimport {\n  EVT_MESSAGE_RECEIVED,\n  EVT_CHOICES_RECEIVED,\n  EVT_CHOICE_SELECTED,\n  EVT_TAB_NOTIFY\n} from 'data/events'\nimport styles from './chat.css'\n\n/**\n * Class representing a Chat tab in the app.\n *\n * Will listen to 'incoming message' events and handle\n * any which have its id attached (see data/gamescript).\n *\n * Responsible for rendering messages and choices in its\n * own tab DOM, and firing appropriate events when the\n * player selects a choice from it.\n *\n * Uses a shared Emitter instance passed into its init()\n */\n\nclass ChatTab {\n  constructor(chatID) {\n    this.chatID = chatID\n    this.template = template\n  }\n\n  init (moduleId, el, emitter) {\n    this.id = moduleId\n    this.emitter = emitter\n\n    this.messageLog = []\n\n    // Cache refs to internal DOM for messages and choices\n    this.convoPanelEl = el.querySelector(`.${styles.conversationPanel}`) || el;\n    this.msgPanelEl = el.querySelector(`.${styles.msgPanel}`);\n    this.choicePanelEl = el.querySelector(`.${styles.choicePanel}`);\n\n    // Bind events for incoming messages/choices\n    this.emitter.bind(EVT_MESSAGE_RECEIVED,\n      this.handleIncomingMessage, this)\n\n    this.emitter.bind(EVT_CHOICES_RECEIVED,\n        this.handleIncomingMessage, this)\n  }\n\n  handleIncomingMessage(msg) {\n    // Only handle messages for this instance\n    if (msg.chat !== this.chatID) return false\n\n    if (msg.choices) {\n      // Render in choices panel if there are some\n      this.displayChoices(msg.choices)\n    } else {\n      // Render message output\n      this.displayMessage(msg)\n    }\n    this.emitter.dispatch(EVT_TAB_NOTIFY, this.id)\n  }\n\n  displayMessage(msg) {\n    this.clearChoices()\n\n    // Render and log a message\n    const container = document.createElement('div');\n    container.classList.add(\n      styles.msg,\n      (msg.isPlayer) ? styles.player : styles[msg.chat]\n    );\n    container.textContent = msg.text;\n    this.msgPanelEl.appendChild(container);\n    this.messageLog.push(msg);\n    // Scroll to bottom of panel\n    this.convoPanelEl.scrollTop = this.msgPanelEl.scrollHeight\n  }\n\n  displayChoices(options) {\n    // Render choices\n    this.clearChoices()\n\n    options.forEach(opt => {\n      const button = document.createElement('button');\n      button.classList.add(styles.choiceButton);\n      button.setAttribute('type', 'button');\n      button.textContent = opt.text;\n      button.addEventListener('click', () => {\n        // Make sure we render the selection in the\n        // message output\n        this.displayMessage({\n          chat: this.chatID,\n          text: opt.text,\n          isPlayer: true,\n        })\n        this.clearChoices()\n        this.emitter.dispatch(EVT_CHOICE_SELECTED, opt)\n      });\n      this.choicePanelEl.appendChild(button);\n    });\n    // Scroll to the bottom of the panel\n    if (this.convoPanelEl.offsetHeight < this.msgPanelEl.scrollHeight) {\n      this.convoPanelEl.scrollTop = this.convoPanelEl.scrollHeight;\n    }\n  }\n\n  clearChoices() {\n    this.choicePanelEl.innerHTML = ''\n  }\n\n}\n\nexport default ChatTab\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/chat/ChatTab.js","import styles from './chat.css'\n\nexport default `\n<div class=\"${styles.conversationPanel}\">\n    <div class=\"${styles.msgPanel}\"></div>\n    <div class=\"${styles.choicePanel}\"></div>\n</div>\n`\n\n\n// WEBPACK FOOTER //\n// ./src/modules/chat/template.js","import styles from './media.css';\nimport { hidden as hiddenCls } from 'shared/main.css';\nimport template from './template';\nimport photoList from './files';\n\nclass MediaTab {\n  constructor() {\n    this.template = template\n  }\n\n  init (moduleId, el, emitter) {\n    this.id = moduleId\n    this.emitter = emitter\n\n    this.mediaPanel = el.querySelector(`.${styles.mediaPanel}`) || el;\n    this.mediaDetail = el.querySelector(`.${styles.mediaDetail}`);\n    this.mediaDetail.querySelector('#detail-cancel').addEventListener('click', () => {\n        this.closeDetails();\n    });\n    this.mediaDetail.querySelector('#detail-submit').addEventListener('click', () => {\n        this.checkPasscode();\n    });\n    setTimeout(() => {\n        this.releasePhoto(0);\n        this.releasePhoto(1);\n    }, 0);\n  }\n\n  releasePhoto (index) {\n    if (index >= photoList.length) {\n        return;\n    }\n\n    const imgContainer = this.mediaPanel.querySelector(`[data-index=\"${index}\"]`);\n    const imgEl = document.createElement('img');\n    imgEl.src = photoList[index];\n    imgEl.addEventListener('click', () => {\n        this.expandPhoto(imgEl);\n    });\n\n    imgContainer.classList.remove(styles.unavailable);\n    imgContainer.appendChild(imgEl);\n  }\n\n  expandPhoto (imgEl) {\n    this.mediaDetail.insertBefore(imgEl.cloneNode(false), this.mediaDetail.firstChild);\n    this.mediaDetail.classList.remove(hiddenCls);\n  }\n\n  closeDetails () {\n    this.mediaDetail.removeChild(this.mediaDetail.firstChild);\n    this.mediaDetail.classList.add(hiddenCls);\n  }\n\n  checkPasscode () {\n    // TODO: Check the passcode, return error if wrong\n    // If correct, close detail view and pass control to puzzle\n    this.closeDetails();\n  }\n}\n\nexport default MediaTab\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/media/MediaTab.js","import styles from './media.css';\nimport { hidden } from 'shared/main.css';\n\nlet imgContainersTemplate = '';\n\nfor (let i = 0; i < 9; i++) {\n    imgContainersTemplate += `<div data-index=\"${i}\" class=\"${styles.imageThumbnail} ${styles.unavailable}\"></div>`\n}\n\nexport default `\n<div class=\"${styles.mediaPanel}\">\n    <div class=\"${styles.mediaList}\">${imgContainersTemplate}</div>\n    <div class=\"${styles.mediaDetail} ${hidden}\">\n        <div class=\"${styles.formRow}\">\n            <label>Passcode:</label>\n            <input type=\"text\" name=\"passcode\">\n        </div>\n        <div class=\"${styles.formRow}\">\n            <button id=\"detail-submit\" type=\"button\">Enter</button>\n            <button id=\"detail-cancel\" type=\"button\">Cancel</button>\n        </div>\n    </div>\n</div>\n`;\n\n\n// WEBPACK FOOTER //\n// ./src/modules/media/template.js","import img1 from '../../assets/location1.jpg';\nimport img2 from '../../assets/location2.jpg';\nimport img3 from '../../assets/location3.jpg';\nimport img4 from '../../assets/location4.jpg';\nimport img5 from '../../assets/location5.jpg';\n\nexport default [\n    img1,\n    img2,\n    img3,\n    img4,\n    img5\n];\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/media/files.js","module.exports = __webpack_public_path__ + \"assets/39e3bf07418437d0ac0f0eed58c3c1f5.jpg\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/location1.jpg\n// module id = 19\n// module chunks = 0","module.exports = __webpack_public_path__ + \"assets/d1ca928fb6bf6590e987636528bc2d57.jpg\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/location2.jpg\n// module id = 20\n// module chunks = 0","module.exports = __webpack_public_path__ + \"assets/7d1dcda134565bb3865c195aaae3f876.jpg\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/location3.jpg\n// module id = 21\n// module chunks = 0","module.exports = __webpack_public_path__ + \"assets/6bf32f35b5a054497897c1fe848b7932.jpg\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/location4.jpg\n// module id = 22\n// module chunks = 0","module.exports = __webpack_public_path__ + \"assets/39d2614c41346f19b5f0e1133488a150.jpg\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/location5.jpg\n// module id = 23\n// module chunks = 0"],"sourceRoot":""}